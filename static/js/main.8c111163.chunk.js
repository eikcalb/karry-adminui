(this["webpackJsonpkarry-admin"]=this["webpackJsonpkarry-admin"]||[]).push([[0],{234:function(e,t,a){e.exports=a.p+"static/media/loading_icon.1a7489ab.gif"},238:function(e,t,a){e.exports=a(558)},472:function(e,t,a){},473:function(e,t,a){},558:function(e,t,a){"use strict";a.r(t);a(239),a(170),a(288);var n,r=a(1),s=a.n(r),c=a(59),i=a.n(c),l=(a(472),a(2)),o=a(16),u=(a(473),a(4)),d=a.n(u),m=a(7),p=a(55),b=a(56),v=function(){function e(t){Object(p.a)(this,e),this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.role=void 0,this.email=void 0,this.profileImageURL=void 0,this.token=void 0,this.phone=void 0,this.country=void 0,this.createdAt=void 0,this.id=t.id,this.role=t.role,this.firstName=t.firstName,this.lastName=t.lastName,this.email=t.email,this.token=t.token}return Object(b.a)(e,null,[{key:"getAllUsers",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,s,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:20,e.prev=2,e.next=5,t.initiateNetworkRequest("/admin/persons/persons?pageNo=".concat(a,"&pageLimit=").concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token)}});case 5:if((s=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,s.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,s.json();case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t2=e.catch(2),e.t2;case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/persons/persons/".concat(a),{method:"PATCH",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token),"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:if((s=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,s.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,s.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/persons/persons/".concat(a),{method:"DELETE",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(n=t.user)||void 0===n?void 0:n.token)}});case 3:if((r=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,r.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"warnUser",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n,r){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/persons/persons/flag/".concat(a),{method:"POST",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":"".concat(null===(s=t.user)||void 0===s?void 0:s.token)},body:JSON.stringify({message:n,postID:r})});case 3:if((c=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,c.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,c.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()}]),e}(),f=a(90),h=a.n(f),E=a(44),g="/logout",j="/users",O="/posts",w="/universities",N="/dashboard",x="/login",y="/register",k="/",C="/posts/reports/:id",P="/posts/reports/",S="app.user.session",T="app.token.refresh",M=new(function(){function e(t){var a=this;Object(p.a)(this,e),this.ready=void 0,this.name="Karry Admin",this.version="1.0",this.config=void 0,this.user=void 0,this.logoutListener=void 0,this.config=t,this.ready=new Promise(function(){var e=Object(m.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.init();case 3:return e.prev=3,e.next=6,a.inflateUser();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:t(!0),e.next=18;break;case 14:e.prev=14,e.t1=e.catch(0),console.log(e.t1),n(e.t1);case 18:case"end":return e.stop()}}),e,null,[[0,14],[3,8]])})));return function(t,a){return e.apply(this,arguments)}}())}return Object(b.a)(e,[{key:"init",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"".concat(this.name," v").concat(this.version),version:1,storeName:"adminstore",description:""}),e.next=3,E.ready();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initiateNetworkRequest",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.a)(Object(l.a)({},a),{},{mode:"cors"}),e.next=3,fetch("".concat(this.config.hostname).concat(t),a);case 3:if(401!==(n=e.sent).status){e.next=24;break}if(this.user){e.next=7;break}throw new Error("Unauthenticated access not allowed!");case 7:return e.prev=7,e.next=10,this.reauthenticate();case 10:return r=e.sent,s=r.token,this.user.token=s,a&&a.headers&&a.headers["x-access-token"]&&(a.headers["x-access-token"]=s),e.next=16,this.initiateNetworkRequest(t,a);case 16:return e.abrupt("return",e.sent);case 19:return e.prev=19,e.t0=e.catch(7),e.next=23,this.logout();case 23:throw e.t0||new Error("App session expired. Login to continue!");case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this,[[7,19]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"reauthenticate",value:function(){var e=Object(m.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getItem(T);case 3:if(t=e.sent){e.next=6;break}throw new Error("Cannot refresh session. You must login to continue!");case 6:return e.next=8,this.initiateNetworkRequest("/admin/persons/refresh",{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({token:t})});case 8:if((a=e.sent).ok){e.next=15;break}return e.t0=Error,e.next=13,a.json();case 13:throw e.t1=e.sent.error,new e.t0(e.t1);case 15:return e.next=17,a.json();case 17:return n=e.sent,e.next=20,E.setItem(T,n.refreshToken);case 20:return delete n.refreshToken,e.abrupt("return",n);case 24:throw e.prev=24,e.t2=e.catch(0),console.log(e.t2),e.t2;case 28:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"inflateUser",value:function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getItem(S);case 2:if(t=e.sent){e.next=5;break}throw new Error("No session available for user!");case 5:return this.user=new v(t),e.abrupt("return",this.user);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"persistUser",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=2;break}throw new Error("No user created!");case 2:return e.next=4,E.setItem(S,this.user);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signedIn",value:function(){return this.user}},{key:"login",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateLogin(t,a);case 3:return e.next=5,this.initiateNetworkRequest("/admin/persons/login",{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:t,password:a})});case 5:if((n=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,n.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,n.json();case 14:return r=e.sent,e.next=17,E.setItem(T,r.refreshToken);case 17:return delete r.refreshToken,this.user=new v(r),e.next=21,this.persistUser();case 21:return e.abrupt("return",this.user);case 24:throw e.prev=24,e.t2=e.catch(0),e.t2;case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"validateLogin",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}throw new Error("Credentials not provided!");case 2:if((t=t.trim())&&h.a.isEmail(t)){e.next=5;break}throw new Error("Invalid username provided!");case 5:if(h.a.matches(a,/[a-zA-z0-9]{6,}/i)){e.next=7;break}throw new Error("Invalid password provided (Password must be alphanumeric and more than 6 characters)!");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addAdmin",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateRegister(t);case 3:return e.next=5,this.initiateNetworkRequest("/admin/persons/new",{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json","x-access-token":"".concat(null===(a=this.user)||void 0===a?void 0:a.token)},body:JSON.stringify(t)});case 5:if((n=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,n.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,n.json();case 14:return r=e.sent,s=new v(r),e.abrupt("return",s);case 19:throw e.prev=19,e.t2=e.catch(0),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"validateRegister",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,r=t.firstName,s=t.lastName,c=t.passwordVerify,a&&n){e.next=3;break}throw new Error("Credentials not provided!");case 3:if(n===c){e.next=5;break}throw new Error("Passwords do not match!");case 5:if(a=a.trim(),r=r.trim(),s=s.trim(),r&&s){e.next=10;break}throw new Error("Firstname and lastname must be provided!");case 10:if(a&&h.a.isEmail(a)){e.next=12;break}throw new Error("Invalid username provided!");case 12:if(h.a.matches(n,/[a-zA-z0-9]{6,}/i)){e.next=14;break}throw new Error("Invalid password provided (Password must be alphanumeric and more than 6 characters)!");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=void 0,E.removeItem(S),E.removeItem(T),this.logoutListener&&this.logoutListener();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())({hostname:"http://localhost:8080"}),q=Object(r.createContext)(M),A=Object(r.createContext)({signedIn:void 0,setSignedInUser:function(){},setLoading:function(){}}),U={toolbar:{boxShadow:"-2px 2px 3px 0px #8888"}},z=a(6),R=a(74),I=a(29);function L(e){var t,a=e.hidden,c=void 0!==a&&a,i=Object(r.useState)({showMenu:!1}),u=Object(o.a)(i,2),d=u[0],m=u[1],p=Object(r.useContext)(q),b=Object(r.useContext)(A);return s.a.createElement("nav",{className:"navbar ".concat(c?"is-hidden":""),role:"navigation",style:U.toolbar},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("div",{className:"navbar-items is-flex-centered is-uppercase has-text-weight-bold px-4 py-2"},p.name),s.a.createElement("div",{role:"button",className:"navbar-burger burger ".concat(d.showMenu?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(){clearTimeout(n),d.showMenu?m(Object(l.a)(Object(l.a)({},d),{},{showMenu:!1})):(m(Object(l.a)(Object(l.a)({},d),{},{showMenu:!0})),n=setTimeout((function(){m(Object(l.a)(Object(l.a)({},d),{},{showMenu:!1}))}),2e4))}},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:"navbar-menu ".concat(d.showMenu?"is-active":"")},p.signedIn()&&b.signedIn?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"navbar-start"},s.a.createElement(I.c,{className:"navbar-item is-tab is-uppercase",exact:!0,to:N,activeClassName:"is-active"},"Dashboard"),s.a.createElement(I.c,{className:"navbar-item is-tab is-uppercase",to:O,activeClassName:"is-active"},"Posts"),s.a.createElement(I.c,{className:"navbar-item is-tab is-uppercase",to:j,activeClassName:"is-active"},"Users"),s.a.createElement(I.c,{className:"navbar-item is-tab is-uppercase",to:w,activeClassName:"is-active"},"Universities")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},s.a.createElement("div",{className:"navbar-link is-flex-centered"},s.a.createElement(z.z,null),"\xa0 ",null===(t=p.user)||void 0===t?void 0:t.firstName),s.a.createElement("div",{className:"navbar-dropdown is-right"},s.a.createElement(I.b,{className:"navbar-item is-flex-centered",to:g},s.a.createElement(z.s,null),"\xa0 Logout"))))):s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"buttons navbar-item has-addons is-uppercase"},s.a.createElement(I.b,{to:x,className:"button is-info is-rounded is-small is-outlined"},s.a.createElement(R.a,null)," \xa0 Login"),s.a.createElement(I.b,{to:y,className:"button is-success is-rounded is-small"},s.a.createElement(z.B,null)," \xa0 Join")))))}var F=a(28),D=a(234),B=a.n(D);function J(){var e=Object(r.useContext)(q),t=Object(r.useContext)(A);return Object(r.useEffect)((function(){e.logout()}),[]),t.signedIn&&t.signedIn?s.a.createElement(xe,{loading:!0}):s.a.createElement(F.a,{to:{pathname:"/"}})}var V=a(236);function G(e){var t=e.children,a=Object(V.a)(e,["children"]),n=Object(r.useContext)(q),c=Object(r.useContext)(A),i=Object(F.h)();return s.a.createElement(F.b,a,n.signedIn()&&c.signedIn?t:s.a.createElement(F.a,{to:{pathname:x,state:{from:i}}}))}function K(e){var t=e.children,a=Object(r.useContext)(q),n=Object(r.useContext)(A),c=Object(F.h)();Object(F.g)();if(a.signedIn()&&n.signedIn){var i=(c.state||{from:{pathname:"/"}}).from;return s.a.createElement(F.a,{to:i})}return t}var W=a(25);function H(){var e=Object(r.useContext)(q),t=Object(r.useContext)(A),a=Object(r.useState)({showPassword:!1,username:"",password:"",loading:!1}),n=Object(o.a)(a,2),c=n[0],i=n[1],u=Object(W.useToasts)().addToast,p=Object(r.useCallback)((function(e){i(Object(l.a)(Object(l.a)({},c),{},{username:e.target.value}))}),[c]),b=Object(r.useCallback)((function(e){i(Object(l.a)(Object(l.a)({},c),{},{password:e.target.value}))}),[c]),v=Object(r.useCallback)(function(){var a=Object(m.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),n.stopPropagation(),a.prev=2,i(Object(l.a)(Object(l.a)({},c),{},{loading:!0})),a.next=6,e.login(c.username,c.password);case 6:r=a.sent,t.setSignedInUser(r),i(Object(l.a)(Object(l.a)({},c),{},{loading:!1})),u("Login successful!",{appearance:"success"}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(2),i(Object(l.a)(Object(l.a)({},c),{},{loading:!1})),u(a.t0.message||"Failed to login!",{appearance:"error"});case 16:case"end":return a.stop()}}),a,null,[[2,12]])})));return function(e){return a.apply(this,arguments)}}(),[c]),f=Object(r.useCallback)((function(){i((function(e){return Object(l.a)(Object(l.a)({},e),{},{showPassword:!e.showPassword})}))}),[c]);return s.a.createElement(K,null,s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-paddingless is-fluid is-flex is-fullheight is-flex-centered has-background-info-light"},s.a.createElement("div",{className:"columns section is-mobile is-multiline is-vcentered is-flex-centered",style:{flex:1}},s.a.createElement("div",{className:"column is-10-tablet is-12-mobile"},s.a.createElement("div",{className:"card has-radius"},s.a.createElement("div",{className:"card-content section"},s.a.createElement("div",{className:"has-text-weight-bold"},s.a.createElement(z.z,{className:"is-size-1"}),s.a.createElement("form",{className:"px-6 pt-4",onSubmit:v},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"help is-uppercase mb-2"},"Enter your admin credentials"),s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:c.loading,required:!0,value:c.username,onChange:p,placeholder:"enter your username...",className:"input",type:"text"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(z.x,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{disabled:c.loading,required:!0,value:c.password,onChange:b,placeholder:"enter your password...",className:"input",type:c.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(z.m,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:f},c.showPassword?s.a.createElement(z.j,null):s.a.createElement(z.i,null)))),s.a.createElement("button",{disabled:c.loading,type:"submit",className:"button is-info is-rounded ".concat(c.loading?"is-loading":"")},s.a.createElement(R.a,null)," \xa0 Login"))))))))))}function $(){Object(r.useContext)(A);return s.a.createElement(K,null,s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-paddingless is-fluid is-flex is-fullheight is-flex-centered has-background-danger-light"},s.a.createElement("div",{className:"columns section is-mobile is-multiline is-vcentered is-flex-centered",style:{flex:1}},s.a.createElement("div",{className:"column is-10-tablet is-12-mobile"},s.a.createElement("div",{className:"card has-radius"},s.a.createElement("div",{className:"card-content section"},s.a.createElement("div",{className:"has-text-weight-bold"},s.a.createElement(z.g,{className:"has-text-danger is-size-1"}),s.a.createElement("p",{className:"is-size-4"},"UNAUTHORIZED ACTION"),s.a.createElement("p",{className:"has-text-weight-normal pt-4 is-capitalized"},"Contact your admin to create an account for you!"),s.a.createElement("p",{className:"has-text-weight-normal pb-4 is-capitalized"},"If you already have an account, kindly proceed to login"),s.a.createElement(I.b,{to:x,className:"button is-info is-rounded"},s.a.createElement(R.a,null)," \xa0 Login")))))))))}function _(e){var t=e.active,a=void 0!==t&&t,n=e.children,c=e.isCard,i=void 0!==c&&c,l=e.onDismiss,o=void 0===l?function(){}:l;return Object(r.useEffect)((function(){var e=window.document.onkeydown;return window.document.onkeydown=function(e){"Escape"===e.key&&(e.stopPropagation(),o())},function(){window.document.onkeydown=e}})),s.a.createElement("div",{className:"modal ".concat(a?"is-active":"")},s.a.createElement("div",{onClick:o,className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},n),i?null:s.a.createElement("button",{onClick:o,className:"modal-close is-large","aria-label":"close"}))}var Q=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getAllUniversities",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,s,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:20,e.prev=2,e.next=5,t.initiateNetworkRequest("/admin/universities?pageNo=".concat(a,"&pageLimit=").concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token)}});case 5:if((s=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,s.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,s.json();case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t2=e.catch(2),e.t2;case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createUniversity",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s,c,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.name,s=a.description,e.prev=1,r&&s){e.next=4;break}throw new Error("Provide a useful anme and description for this university!");case 4:if(n&&!(n.size>10485760)){e.next=6;break}throw new Error("Provide a file less than 10MB!");case 6:return(i=new FormData).append("data",n),i.append("name",r),i.append("description",s),e.next=12,t.initiateNetworkRequest("/admin/universities",{method:"POST",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(c=t.user)||void 0===c?void 0:c.token)},body:i});case 12:if((l=e.sent).ok){e.next=19;break}return e.t0=Error,e.next=17,l.json();case 17:throw e.t1=e.sent.error,new e.t0(e.t1);case 19:return e.next=21,l.json();case 21:return e.abrupt("return",e.sent);case 24:throw e.prev=24,e.t2=e.catch(1),e.t2;case 27:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateUniversity",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n,r){var s,c,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.name&&n.description){e.next=3;break}throw new Error("Provide a useful anme and description for this university!");case 3:if(c={Accept:"application/json","x-access-token":"".concat(null===(s=t.user)||void 0===s?void 0:s.token)},!r){e.next=13;break}if(!(r.size>10485760)){e.next=7;break}throw new Error("Provide a file less than 10MB!");case 7:(i=new FormData).append("data",r),i.append("name",n.name),i.append("description",n.description),e.next=15;break;case 13:c["Content-Type"]="application/json",i=JSON.stringify(n);case 15:return e.next=17,t.initiateNetworkRequest("/admin/universities/".concat(a),{method:"PATCH",referrerPolicy:"no-referrer",headers:c,body:i});case 17:if((l=e.sent).ok){e.next=24;break}return e.t0=Error,e.next=22,l.json();case 22:throw e.t1=e.sent.error,new e.t0(e.t1);case 24:return e.next=26,l.json();case 26:return e.abrupt("return",e.sent);case 29:throw e.prev=29,e.t2=e.catch(0),e.t2;case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"deleteUniversity",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/universities/".concat(a),{method:"DELETE",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(n=t.user)||void 0===n?void 0:n.token)}});case 3:if((r=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.abrupt("return",!0);case 13:throw e.prev=13,e.t2=e.catch(0),e.t2;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleRequest",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.player,s=n.approved,e.prev=1,r&&(s||!1===s)){e.next=4;break}throw new Error("Kindly provide player and specify action!");case 4:return e.next=6,t.initiateNetworkRequest("/admin/universities/".concat(a,"/request"),{method:"POST",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(c=t.user)||void 0===c?void 0:c.token),"Content-Type":"application/json"},body:JSON.stringify({player:r,approved:s})});case 6:if((i=e.sent).ok){e.next=13;break}return e.t0=Error,e.next=11,i.json();case 11:throw e.t1=e.sent.error,new e.t0(e.t1);case 13:return e.abrupt("return",!0);case 16:throw e.prev=16,e.t2=e.catch(1),e.t2;case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRequests",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/universities/".concat(a,"/request"),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(n=t.user)||void 0===n?void 0:n.token)}});case 3:if((r=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.abrupt("return",r.json());case 13:throw e.prev=13,e.t2=e.catch(0),e.t2;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteRequest",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/universities/".concat(a,"/request/").concat(n),{method:"DELETE",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token),"Content-Type":"application/json"}});case 3:if((s=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,s.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.abrupt("return",!0);case 13:throw e.prev=13,e.t2=e.catch(0),e.t2;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getPlayers",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/universities/".concat(a,"/player"),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(n=t.user)||void 0===n?void 0:n.token)}});case 3:if((r=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.abrupt("return",r.json());case 13:throw e.prev=13,e.t2=e.catch(0),e.t2;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deletePlayer",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/universities/".concat(a,"/").concat(n),{method:"DELETE",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token)}});case 3:if((s=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,s.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.abrupt("return",!0);case 13:throw e.prev=13,e.t2=e.catch(0),e.t2;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}();function X(){var e=Object(r.useContext)(q),t=Object(r.useState)({loading:!1,password:"",passwordVerify:"",username:"",firstName:"",lastName:"",creatorPassword:"",showPassword:!1,showVerifyPassword:!1,showCreatorPassword:!1}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{firstName:e.target.value}))}),[n]),p=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{lastName:e.target.value}))}),[n]),b=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{username:e.target.value}))}),[n]),v=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{password:e.target.value}))}),[n]),f=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{passwordVerify:e.target.value}))}),[n]),h=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{creatorPassword:e.target.value}))}),[n]),E=Object(r.useCallback)(function(){var t=Object(m.a)(d.a.mark((function t(a){var r,s,o,u,m,p,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),t.prev=2,c(Object(l.a)(Object(l.a)({},n),{},{loading:!0})),r=n.username,s=n.password,o=n.passwordVerify,u=n.firstName,m=n.lastName,p=n.creatorPassword,t.next=7,e.addAdmin({email:r,firstName:u,lastName:m,password:s,passwordVerify:o,creatorPassword:p});case 7:b=t.sent,console.log(b,":admin created"),c(Object(l.a)(Object(l.a)({},n),{},{loading:!1})),i("Successfully created admin!",{appearance:"success"}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),c(Object(l.a)(Object(l.a)({},n),{},{loading:!1})),i(t.t0.message||"Failed to create admin!",{appearance:"error"});case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),[n]),g=Object(r.useCallback)((function(){c((function(e){return Object(l.a)(Object(l.a)({},e),{},{showPassword:!e.showPassword})}))}),[n]),j=Object(r.useCallback)((function(){c((function(e){return Object(l.a)(Object(l.a)({},e),{},{showVerifyPassword:!e.showVerifyPassword})}))}),[n]),O=Object(r.useCallback)((function(){c((function(e){return Object(l.a)(Object(l.a)({},e),{},{showCreatorPassword:!e.showCreatorPassword})}))}),[n]);return s.a.createElement("form",{className:"card has-radius",onSubmit:E},s.a.createElement("div",{className:"card-content"},s.a.createElement(z.q,{className:"is-size-1 mb-4"}),s.a.createElement("p",{className:"help mb-2 is-uppercase has-text-weight-bold"},"Enter New Admin Details"),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:n.loading,required:!0,className:"input",onChange:u,value:n.firstName,type:"text",placeholder:"enter firstname..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.C,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:n.loading,required:!0,className:"input",onChange:p,value:n.lastName,type:"text",placeholder:"enter lastname..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.C,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:n.loading,required:!0,className:"input",onChange:b,value:n.username,type:"text",placeholder:"enter username..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.A,null)))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{disabled:n.loading,onChange:v,required:!0,value:n.password,placeholder:"enter admin password",className:"input",type:n.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(z.m,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:g},n.showPassword?s.a.createElement(z.j,null):s.a.createElement(z.i,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{disabled:n.loading,onChange:f,required:!0,value:n.passwordVerify,placeholder:"verify password",className:"input",type:n.showVerifyPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(z.m,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:j},n.showVerifyPassword?s.a.createElement(z.j,null):s.a.createElement(z.i,null)))))),s.a.createElement("p",{className:"help is-danger is-uppercase mt-6 has-text-weight-bold"},"Enter your admin password to confirm"),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{disabled:n.loading,onChange:h,required:!0,value:n.creatorPassword,placeholder:"confirm admin password",className:"input",type:n.showCreatorPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(z.m,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:O},n.showCreatorPassword?s.a.createElement(z.j,null):s.a.createElement(z.i,null)))),s.a.createElement("button",{disabled:n.loading,type:"submit",className:"button mt-4 is-info is-rounded ".concat(n.loading?"is-loading":"")},s.a.createElement(z.p,null)," \xa0 Add Admin Account")))}function Y(){var e=Object(r.useContext)(q),t=Object(r.useState)({loading:!1,name:"",description:"",file:null}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{name:e.target.value}))}),[n]),p=Object(r.useCallback)((function(e){c(Object(l.a)(Object(l.a)({},n),{},{description:e.target.value}))}),[n]),b=Object(r.useCallback)((function(e){var t,a;c(Object(l.a)(Object(l.a)({},n),{},{file:(null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0])||null}))}),[n]),v=Object(r.useCallback)(function(){var t=Object(m.a)(d.a.mark((function t(a){var r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),t.prev=2,c(Object(l.a)(Object(l.a)({},n),{},{loading:!0})),r=n.name,s=n.description,t.next=7,Q.createUniversity(e,{name:r.toLowerCase(),description:s},n.file);case 7:c(Object(l.a)(Object(l.a)({},n),{},{loading:!1})),i("Successfully created university!",{appearance:"success"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),c(Object(l.a)(Object(l.a)({},n),{},{loading:!1})),i(t.t0.message||"Failed to create university!",{appearance:"error"});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),[n]);return s.a.createElement("form",{className:"card has-radius",onSubmit:v},s.a.createElement("div",{className:"card-content"},s.a.createElement(z.w,{className:"is-size-1 mb-2"}),s.a.createElement("p",{className:"help mb-4 is-uppercase has-text-weight-bold"},"Enter University Details"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:n.loading,required:!0,className:"input",onChange:u,value:n.name,type:"text",placeholder:"University name"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.C,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea",required:!0,disabled:n.loading,onChange:p,value:n.description,placeholder:"University description"}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"file has-name is-fullwidth"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{disabled:n.loading,className:"file-input",type:"file",accept:"image/*",name:"resume",onChange:b}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement(z.d,null)),s.a.createElement("span",{className:"file-label"},"Choose Image")),s.a.createElement("span",{className:"file-name"},n.file?n.file.name:s.a.createElement("i",null,"no file selected"))))),s.a.createElement("button",{disabled:n.loading,type:"submit",className:"button mt-4 is-info is-rounded ".concat(n.loading?"is-loading":"")},s.a.createElement(z.p,null)," \xa0 Create University")))}function Z(e){var t=e.icon,a=void 0===t?s.a.createElement(z.h,null):t,n=e.message,r=void 0===n?"No data available!":n,c=e.shadow,i=void 0===c||c;return s.a.createElement("div",{className:"card has-radius ".concat(i?"":"is-shadowless")},s.a.createElement("div",{className:"card-content"},s.a.createElement("span",{className:"is-size-1 has-text-danger block"},a),s.a.createElement("p",{className:"is-uppercase has-text-weight-bold is-size-7"},r)))}var ee=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getCount",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/persons/count",{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(a=t.user)||void 0===a?void 0:a.token)}});case 3:if((n=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,n.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,n.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),te=Intl.NumberFormat();function ae(e){var t=e.name,a=e.value,n=e.prefix,r=void 0===n?s.a.createElement(s.a.Fragment,null):n,c=e.loading,i=void 0!==c&&c;return s.a.createElement("div",{className:"level-item has-text-centered"},s.a.createElement("div",null,s.a.createElement("p",{className:"heading"},t),i?s.a.createElement("button",{className:"button is-white is-loading"}):s.a.createElement("p",{className:"title"},r," ",te.format(a))))}function ne(){var e=Object(r.useContext)(q),t=Object(r.useState)({showAdminModal:!1,loadingStat:!0,showUniversityModal:!1,players:0,managers:0,teams:0,tournaments:0,tranactions:0,inactiveUsers:0,subscribedPlayers:0,universities:0,paymentsReceived:0,ads:0,posts:0}),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){ee.getCount(e).then(function(){var e=Object(m.a)(d.a.mark((function e(t){var a,r,s,i,o,u,m,p,b,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.players,r=t.managers,s=t.teams,i=t.tournaments,o=t.transactions,u=t.subscribedPlayers,m=t.universities,p=t.paymentsReceived,b=t.ads,v=t.posts,c(Object(l.a)(Object(l.a)({},n),{},{loadingStat:!1,players:a,managers:r,teams:s,tournaments:i,tranactions:o,subscribedPlayers:u,universities:m,paymentsReceived:p,ads:b,posts:v}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),c(Object(l.a)(Object(l.a)({},n),{},{loadingStat:!1}))}))}),[]),s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-fluid is-fullheight"},s.a.createElement("div",{className:"section my-4"},s.a.createElement("div",{className:"level"},s.a.createElement(ae,{name:"Total Players",value:n.players,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Users",value:n.managers,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Teams",value:n.teams,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Universities",value:n.universities,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Tournaments",value:n.tournaments,loading:n.loadingStat})),s.a.createElement("div",{className:"level mt-6"},s.a.createElement(ae,{name:"Total Transactions",value:n.tranactions,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Premium Users",value:n.subscribedPlayers,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Inward",prefix:"$",value:n.paymentsReceived,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Posts",value:n.posts,loading:n.loadingStat}),s.a.createElement(ae,{name:"Total Ads",value:n.ads,loading:n.loadingStat})),s.a.createElement("div",{className:"mt-6 columns is-multiline is-vcentered is-flex-centered"},s.a.createElement("div",{className:"column is-4-desktop is-6-tablet"},s.a.createElement("div",{className:"card is-hoverable-card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"block has-text-weight-bold is-size-7 is-uppercase"},s.a.createElement("p",null,"Add a new admin to manage ",e.name)),s.a.createElement("div",{onClick:function(){return c(Object(l.a)(Object(l.a)({},n),{},{showAdminModal:!0}))},className:"control"},s.a.createElement("button",{className:"button is-size-7 is-dark is-fullwidth is-rounded is-uppercase"},"Create a new admin"))))),s.a.createElement("div",{className:"column is-4-desktop is-6-tablet"},s.a.createElement("div",{className:"card is-hoverable-card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"block has-text-weight-bold is-size-7 is-uppercase"},s.a.createElement("p",null,"Add a university to ",e.name)),s.a.createElement("div",{onClick:function(){return c(Object(l.a)(Object(l.a)({},n),{},{showUniversityModal:!0}))},className:"control"},s.a.createElement("button",{className:"button is-size-7 is-info is-fullwidth is-rounded is-uppercase"},"Create a university")))))))),s.a.createElement(_,{active:n.showAdminModal,onDismiss:function(){return c(Object(l.a)(Object(l.a)({},n),{},{showAdminModal:!1}))}},s.a.createElement(X,null)),s.a.createElement(_,{active:n.showUniversityModal,onDismiss:function(){return c(Object(l.a)(Object(l.a)({},n),{},{showUniversityModal:!1}))}},s.a.createElement(Y,null)))}var re=a(46),se=a(110),ce=a.n(se);function ie(e){var t=e.user,a=e.onCancel,n=Object(r.useContext)(q),c=Object(r.useState)(Object(l.a)(Object(l.a)({user:t},t),{},{loading:!1,showEdit:!1})),i=Object(o.a)(c,2),u=i[0],p=i[1],b=Object(W.useToasts)().addToast,f=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{firstName:e.target.value}))}),[u]),h=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{lastName:e.target.value}))}),[u]),E=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{email:e.target.value}))}),[u]),g=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{country:e.target.value}))}),[u]),j=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{phone:e.target.value}))}),[u]),O=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){var r,s,c,i,o,m,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),e.prev=2,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),r=u.user,s=r.firstName,c=r.lastName,i=r.email,o=r.phone,m=r.country,f={firstName:u.firstName,lastName:u.lastName,email:u.email,phone:u.phone,country:u.country},JSON.stringify({firstName:s,lastName:c,email:i,phone:o,country:m})!==JSON.stringify(f)){e.next=8;break}throw new Error("No change made!");case 8:return e.next=10,v.updateUser(n,t.id,f);case 10:e.sent,p(Object(l.a)(Object(l.a)({},u),{},{user:Object(l.a)(Object(l.a)({},u.user),f),showEdit:!1,loading:!1})),b("Successfully updated user!",{appearance:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b(e.t0.message||"Failed to update user!",{appearance:"error"});case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),[u]),w=Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),window.confirm("Are you sure you want to delete this user?")){e.next=6;break}return p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),e.abrupt("return");case 6:return e.next=8,v.deleteUser(n,t.id);case 8:e.sent,p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b("Successfully deleted user!",{appearance:"success"}),a(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b(e.t0.message||"Failed to delete user!",{appearance:"error"});case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),[u]),N=u.user;if(!N)return s.a.createElement(Z,{message:"No user selected!",icon:s.a.createElement(z.y,null)});var x=ce()(N.createdAt);return s.a.createElement("div",{className:"card has-radius"},s.a.createElement("div",{className:"card-content"},s.a.createElement("figure",{className:"image mb-4 is-128x128",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:N.profileImageURL})),u.showEdit?s.a.createElement("form",{onSubmit:O},s.a.createElement("div",{className:"my-6"},s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:f,value:u.firstName,type:"text",placeholder:"enter firstname..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.x,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:h,value:u.lastName,type:"text",placeholder:"enter lastname..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.x,null)))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:E,value:u.email,type:"mail",placeholder:"enter email..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.f,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:j,value:u.phone,type:"tel",placeholder:"enter phone number..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.o,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:g,value:u.country,type:"text",placeholder:"enter country..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.l,null))))),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!1}))},disabled:u.loading,type:"reset",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Cancel")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:u.loading,type:"submit",className:"button mt-4 is-success is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.a,null),"\xa0 Save Changes")))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb-6 block"},s.a.createElement("p",{className:"is-capitalized has-text-grey-light has-text-centered"},s.a.createElement(z.c,null),"\xa0 Created ",x.fromNow()),s.a.createElement("div",{className:"columns mt-4 is-multiline"},s.a.createElement("p",{className:"is-capitalized column is-6"},s.a.createElement(z.z,null),"\xa0 ","".concat(N.firstName," ").concat(N.lastName)),s.a.createElement("p",{className:"is-lowercase column is-6"},s.a.createElement(z.f,null),"\xa0 ",N.email),s.a.createElement("p",{className:"is-capitalized column is-6"},s.a.createElement(z.o,null),"\xa0 ",N.phone||s.a.createElement("span",{className:"has-text-grey is-size-6 is-uppercase"},"Not set!")),s.a.createElement("p",{className:"is-capitalized column is-6"},s.a.createElement(z.l,null),"\xa0 ",N.country))),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:a,disabled:u.loading,type:"button",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Back")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:w,disabled:u.loading,type:"button",className:"button mt-4 is-danger is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.v,null),"\xa0 Delete")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!0}))},disabled:u.loading,type:"button",className:"button mt-4 is-success is-rounded is-uppercase"},s.a.createElement(z.n,null),"\xa0 Edit"))))))}Intl.NumberFormat();function le(e){var t=e.user,a=e.onClick;return s.a.createElement("div",{onClick:a,className:"column is-3-widescreen is-4-desktop is-12-mobile is-6-tablet"},s.a.createElement("div",{className:"card is-hoverable-card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("figure",{className:"image mb-4 is-96x96",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:t.profileImageURL})),s.a.createElement("div",{className:"block"},s.a.createElement("p",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"is-clipped is-size-6 has-text-weight-bold is-capitalized"},"".concat(t.firstName," ").concat(t.lastName))))))}function oe(){var e=Object(r.useContext)(q),t=Object(r.useState)({loadingMore:!1,users:new Array,selectedUser:void 0}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(r.useCallback)(Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),t.next=4,v.getAllUsers(e,Math.max(2,Math.ceil(n.users.length/20)+1));case 4:if(!((a=t.sent).length<1)){t.next=8;break}return i("No new data to fetch!",{appearance:"info"}),t.abrupt("return",c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})));case 8:c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,users:[].concat(Object(re.a)(n.users),Object(re.a)(a))})),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"});case 16:case"end":return t.stop()}}),t,null,[[0,11]])}))),[n]);return Object(r.useEffect)((function(){c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0}));v.getAllUsers(e).then((function(e){if(e.length<1)return i("No new data to fetch!",{appearance:"info"}),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1}));c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,users:e}))})).catch((function(e){console.log(e),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"})}))}),[]),s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-fluid mb-6"},s.a.createElement("div",{className:"section my-4"},s.a.createElement("div",{className:"columns is-multiline is-vcentered is-flex-centered"},n.users.map((function(e){return s.a.createElement(le,{key:e.id,onClick:function(){c((function(t){return Object(l.a)(Object(l.a)({},t),{},{selectedUser:e})}))},user:e})})))),s.a.createElement("div",{onClick:u,className:"button is-size-7 px-5 is-uppercase is-rounded is-dark ".concat(n.loadingMore?"is-loading":"")},"Load More")),n.selectedUser?s.a.createElement(_,{active:!0,onDismiss:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selectedUser:void 0}))}},s.a.createElement(ie,{onCancel:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selectedUser:void 0}))},user:n.selectedUser})):null)}function ue(e){var t=Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),a="KMBT"[Math.min(3,t-1)];if(t="KMBT".indexOf(a)+1,a){var n=Math.pow(10,2);return Math.round(e/Math.pow(1e3,t)*n)/n+a}return e}var de=function(){function e(){Object(p.a)(this,e),this.id=void 0,this.title=void 0,this.mediaURL=void 0,this.thumbnailURL=void 0,this.viewCount=0,this.type=void 0,this.uploadTime=void 0,this.owner=void 0,this.like=0,this.dislike=0,this.reportsCount=0}return Object(b.a)(e,null,[{key:"getAllPosts",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,s,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:20,e.prev=2,e.next=5,t.initiateNetworkRequest("/admin/posts/posts?pageNo=".concat(a,"&pageLimit=").concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token)}});case 5:if((s=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,s.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,s.json();case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t2=e.catch(2),e.t2;case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePost",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/posts/posts/".concat(a),{method:"PATCH",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(r=t.user)||void 0===r?void 0:r.token),"Content-Type":"application/json"},body:JSON.stringify({title:n})});case 3:if((s=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,s.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,s.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getReports",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r,s,c,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:1,r=i.length>3&&void 0!==i[3]?i[3]:200,e.prev=2,e.next=5,t.initiateNetworkRequest("/admin/posts/posts/".concat(a,"/flag?pageNo=").concat(n,"&pageLimit=").concat(r),{method:"GET",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(s=t.user)||void 0===s?void 0:s.token)}});case 5:if((c=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,c.json();case 10:throw e.t1=e.sent.error,new e.t0(e.t1);case 12:return e.next=14,c.json();case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t2=e.catch(2),e.t2;case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deletePost",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/admin/posts/posts/".concat(a),{method:"DELETE",referrerPolicy:"no-referrer",headers:{Accept:"application/json","x-access-token":"".concat(null===(n=t.user)||void 0===n?void 0:n.token)}});case 3:if((r=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.error,new e.t0(e.t1);case 10:return e.next=12,r.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t2=e.catch(0),e.t2;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();function me(e){var t=e.post,a=e.onCancel,n=Object(r.useContext)(q),c=Object(r.useState)({post:t,title:t.title,loading:!1,showEdit:!1}),i=Object(o.a)(c,2),u=i[0],p=i[1],b=Object(r.useState)({show:!1}),f=Object(o.a)(b,2),h=f[0],E=f[1],g=Object(W.useToasts)().addToast,j=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{title:e.target.value}))}),[u]),O=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),e.prev=2,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),u.title!==u.post.title){e.next=6;break}throw new Error("No change made!");case 6:return e.next=8,de.updatePost(n,t.id,u.title);case 8:r=e.sent,p(Object(l.a)(Object(l.a)({},u),{},{post:Object(l.a)(Object(l.a)({},u.post),{},{title:r.title}),showEdit:!1,loading:!1})),g("Successfully updated post!",{appearance:"success"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),g(e.t0.message||"Failed to update post!",{appearance:"error"});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),[u]),w=Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),window.confirm("Are you sure you want to delete this post?")){e.next=6;break}return p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),e.abrupt("return");case 6:return e.next=8,de.deletePost(n,t.id);case 8:p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),g("Successfully deleted post!",{appearance:"success"}),a(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),g(e.t0.message||"Failed to delete post!",{appearance:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[u]),N=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),!(a.length<24)){e.next=4;break}throw new Error("Provide a meaningful message more than 24 characters!");case 4:if(window.confirm("Send a warning to this user about the content of this reported post?")){e.next=8;break}return p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),e.abrupt("return");case 8:return e.next=10,v.warnUser(n,t.owner.id,a,t.id);case 10:p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),E({show:!1}),g("Successfully sent warning to user!",{appearance:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),g(e.t0.message||"Failed to warn user!",{appearance:"error"});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[u]),x=u.post;if(!x)return s.a.createElement(Z,{message:"No Post Selected!",icon:s.a.createElement(z.r,null)});var y=ce.a.unix(x.uploadTime/1e3);return s.a.createElement("div",{className:"card has-radius"},h.show?s.a.createElement("div",{className:"card-content"},s.a.createElement(pe,{onBack:function(){return E(Object(l.a)(Object(l.a)({},h),{},{show:!1}))},onSubmit:N,loading:u.loading})):s.a.createElement("div",{className:"card-content"},s.a.createElement("figure",{className:"image",style:{margin:"auto"}},"image"===x.type?s.a.createElement("img",{style:{height:"100%"},src:x.mediaURL}):s.a.createElement("video",{controls:!0,src:x.mediaURL})),u.showEdit?s.a.createElement("form",{onSubmit:O},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"help block has-text-weight-bold is-size-6 is-uppercase"},"Edit Post Title"),s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:j,value:u.title,type:"text",placeholder:"enter title..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.e,null)))),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!1}))},disabled:u.loading,type:"reset",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Cancel")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:u.loading,type:"submit",className:"button mt-4 is-success is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.a,null),"\xa0 Save Changes")))):s.a.createElement("div",null,s.a.createElement("p",{style:{textOverflow:"ellipsis"},className:"block is-clipped is-size-5 has-text-centered has-text-weight-bold is-capitalized"},x.title),s.a.createElement("p",{style:{justifyContent:"space-between"},className:"is-capitalized is-flex block has-text-grey-light has-text-centered"},s.a.createElement("span",null,s.a.createElement(z.c,null),"\xa0 Created ",y.fromNow()),s.a.createElement("span",null,s.a.createElement(z.k,null),"\xa0 ",ue(x.reportsCount)," ",x.reportsCount>1?"reports":"report")),s.a.createElement("div",{className:"is-flex-centered"},s.a.createElement("div",{className:"field has-addons has-addons-centered"},s.a.createElement("div",{className:"control"},s.a.createElement(I.b,{to:"".concat(P).concat(t.id),target:"_blank",type:"button",className:"button is-small is-rounded is-uppercase"},"View Flags")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return E(Object(l.a)(Object(l.a)({},u),{},{show:!0}))},disabled:u.loading,type:"button",className:"button is-small is-warning is-inverted is-rounded is-uppercase"},"Warn Account")))),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("figure",{className:"image is-48x48",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:x.owner.profileImageURL}))),s.a.createElement("div",{className:"column pl-0"},s.a.createElement("p",{style:{textOverflow:"ellipsis"},className:"is-clipped is-size-6 has-text-left is-capitalized"},"".concat(x.owner.firstName," ").concat(x.owner.lastName))),s.a.createElement("div",{className:"column is-narrow field has-addons has-addons-right"},s.a.createElement("p",{className:"is-capitalized mx-2"},s.a.createElement(z.u,null)," ",ue(x.like)),s.a.createElement("p",{className:"is-capitalized mx-2"},s.a.createElement(z.t,null)," ",ue(x.dislike)),"video"===x.type?s.a.createElement("p",{className:"is-capitalized mx-2"},s.a.createElement(z.i,null)," ",ue(x.viewCount)):null)),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:a,disabled:u.loading,type:"button",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Back")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:w,disabled:u.loading,type:"button",className:"button mt-4 is-danger is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.v,null),"\xa0 Delete")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!0}))},disabled:u.loading,type:"button",className:"button mt-4 is-success is-rounded is-uppercase"},s.a.createElement(z.n,null),"\xa0 Edit"))))))}var pe=function(e){var t=e.onSubmit,a=e.onBack,n=e.loading,c=(Object(r.useContext)(q),Object(r.useState)("This post violates the community guidelines of Karry!")),i=Object(o.a)(c,2),l=i[0],u=i[1];return s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),t(l.trim())}},s.a.createElement(z.g,{className:"is-size-1 has-text-danger"}),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"help block has-text-weight-bold is-size-6 is-uppercase"},"Send warning message"),s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("textarea",{disabled:n,required:!0,minLength:24,rows:4,className:"textarea",onChange:function(e){return u(e.target.value)},value:l,placeholder:"Set message to display to user about this warning..."}))),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:a,disabled:n,type:"reset",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Cancel")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:n,type:"submit",className:"button mt-4 is-success is-rounded is-uppercase ".concat(n?"is-loading":"")},s.a.createElement(z.a,null),"\xa0 Send Warning"))))};Intl.NumberFormat();function be(e){var t=e.post,a=e.onClick,n=t.owner;return s.a.createElement("div",{onClick:a,className:"column is-3-widescreen is-4-desktop is-12-mobile is-6-tablet"},s.a.createElement("div",{className:"card is-hoverable-card"},s.a.createElement("div",{className:"card-content is-paddingless"},s.a.createElement("figure",{className:"image is-4by3",style:{margin:"auto"}},s.a.createElement("img",{src:t.thumbnailURL})),s.a.createElement("div",{className:"px-2 py-2"},s.a.createElement("p",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"block is-clipped is-size-5 has-text-centered has-text-weight-bold is-capitalized"},t.title),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("figure",{className:"image is-32x32",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:n.profileImageURL}))),s.a.createElement("div",{className:"column pl-0"},s.a.createElement("p",{style:{textOverflow:"ellipsis"},className:"is-clipped is-size-6 has-text-left is-capitalized"},"".concat(n.firstName," ").concat(n.lastName))),s.a.createElement("div",{className:"column pl-0 is-narrow"},"image"===t.type?s.a.createElement("p",{className:"is-capitalized"},s.a.createElement(z.u,null)," ",ue(t.like)):s.a.createElement("p",{className:"is-capitalized"},s.a.createElement(z.i,null)," ",ue(t.viewCount))))))))}function ve(){var e=Object(r.useContext)(q),t=Object(r.useState)({loadingMore:!1,posts:new Array,selectedPost:void 0}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(r.useCallback)(Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),t.next=4,de.getAllPosts(e,Math.max(2,Math.ceil(n.posts.length/20)+1));case 4:if(!((a=t.sent).length<1)){t.next=8;break}return i("No new data to fetch!",{appearance:"info"}),t.abrupt("return",c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})));case 8:c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,posts:[].concat(Object(re.a)(n.posts),Object(re.a)(a))})),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})),i("Failed to load new data!",{appearance:"error"});case 16:case"end":return t.stop()}}),t,null,[[0,11]])}))),[n]);return Object(r.useEffect)((function(){c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0}));de.getAllPosts(e).then((function(e){if(e.length<1)return i("No new data to fetch!",{appearance:"info"}),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1}));c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,posts:e}))})).catch((function(e){console.log(e),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})),i("Failed to load new data!",{appearance:"error"})}))}),[]),s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-fluid mb-6"},s.a.createElement("div",{className:"section my-4"},s.a.createElement("div",{className:"columns is-multiline is-vcentered is-flex-centered"},n.posts.map((function(e){return s.a.createElement(be,{key:e.id,onClick:function(){c((function(t){return Object(l.a)(Object(l.a)({},t),{},{selectedPost:e})}))},post:e})})))),s.a.createElement("div",{onClick:u,className:"button is-size-7 px-5 is-uppercase is-rounded is-dark ".concat(n.loadingMore?"is-loading":"")},"Load More")),n.selectedPost?s.a.createElement(_,{active:!0,onDismiss:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selectedPost:void 0}))}},s.a.createElement(me,{onCancel:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selectedPost:void 0}))},post:n.selectedPost})):null)}Intl.NumberFormat();function fe(e){var t=e.report;return s.a.createElement("div",{className:"column is-10 is-offset-1 is-12-mobile mx-6"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"px-2 py-2 columns is-vcentered"},s.a.createElement("div",{className:"column is-narrow is-12-mobile"},s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("figure",{className:"image is-32x32",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:t.person.profileImageURL}))),s.a.createElement("div",{className:"column pl-0"},s.a.createElement("p",{style:{textOverflow:"ellipsis"},className:"is-clipped has-text-left has-text-centered-mobile is-capitalized"},"".concat(t.person.firstName," ").concat(t.person.lastName))))),s.a.createElement("div",{className:"column is-expanded is-12-mobile"},s.a.createElement("p",{className:"is-clipped is-size-6 has-text-weight-bold"},t.content))))))}function he(){var e=Object(r.useContext)(q),t=Object(r.useState)({loadingMore:!1,reports:new Array}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(F.i)().id,p=Object(r.useCallback)(Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),t.next=4,de.getReports(e,u,Math.max(2,Math.ceil(n.reports.length/20)+1));case 4:if(!((a=t.sent).length<1)){t.next=8;break}return i("No new data to fetch!",{appearance:"info"}),t.abrupt("return",c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})));case 8:c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,reports:[].concat(Object(re.a)(n.reports),Object(re.a)(a))})),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"});case 16:case"end":return t.stop()}}),t,null,[[0,11]])}))),[n]);return Object(r.useEffect)((function(){c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),de.getReports(e,u).then((function(e){if(e.length<1)return i("No new data to fetch!",{appearance:"info"}),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1}));c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,reports:e}))})).catch((function(e){console.log(e),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"})}))}),[]),u?s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-fluid mb-6"},s.a.createElement("div",{className:"section my-4"},s.a.createElement("div",{className:"columns is-multiline is-vcentered is-flex-centered"},n.reports.map((function(e){return s.a.createElement(fe,{key:e.id,report:e})})))),s.a.createElement("div",{onClick:p,className:"button is-size-7 px-5 is-uppercase is-rounded is-dark ".concat(n.loadingMore?"is-loading":"")},"Load More"))):s.a.createElement(xe,{loading:!1},s.a.createElement("div",{className:"container is-fluid is-fullheight is-flex-centered"},s.a.createElement(Z,{message:"Post not found",shadow:!1})))}var Ee=a(148);function ge(e){var t=e.uni,a=e.onCancel,n=Object(r.useContext)(q),c=Object(r.useState)(Object(l.a)(Object(l.a)({university:t},t),{},{loading:!1,showEdit:!1,file:void 0})),i=Object(o.a)(c,2),u=i[0],p=i[1],b=Object(W.useToasts)().addToast,v=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{name:e.target.value}))}),[u]),f=Object(r.useCallback)((function(e){p(Object(l.a)(Object(l.a)({},u),{},{description:e.target.value}))}),[u]),h=Object(r.useCallback)((function(e){var t,a;p(Object(l.a)(Object(l.a)({},u),{},{file:(null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0])||void 0}))}),[u]),E=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){var r,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),e.prev=2,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),r=u.name,s=u.description,u.file||JSON.stringify({name:r,description:s})!==JSON.stringify({name:u.university.name,description:u.university.description})){e.next=7;break}throw new Error("No changes to save!");case 7:return e.next=9,Q.updateUniversity(n,t.id,{name:r.toLowerCase(),description:s},u.file);case 9:c=e.sent,console.log(c),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1,name:r,description:s})),b("Successfully updated university!",{appearance:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b(e.t0.message||"Failed to update university!",{appearance:"error"});case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),[u]),g=Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(Object(l.a)(Object(l.a)({},u),{},{loading:!0})),window.confirm("Are you sure you want to delete this university?")){e.next=6;break}return p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),e.abrupt("return");case 6:return e.next=8,Q.deleteUniversity(n,t.id);case 8:p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b("Successfully deleted university!",{appearance:"success"}),a(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),p(Object(l.a)(Object(l.a)({},u),{},{loading:!1})),b(e.t0.message||"Failed to delete university!",{appearance:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[u]);return u.university?s.a.createElement("div",{className:"card has-radius"},s.a.createElement("div",{className:"card-content"},s.a.createElement("figure",{className:"image mb-4 is-128x128",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:u.profileImageURL})),u.showEdit?s.a.createElement("form",{onSubmit:E},s.a.createElement("div",{className:"my-6"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{disabled:u.loading,required:!0,className:"input",onChange:v,value:u.name,type:"text",placeholder:"University name"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(z.C,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea",required:!0,disabled:u.loading,onChange:f,value:u.description,placeholder:"University description"}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"file has-name is-fullwidth"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{disabled:u.loading,className:"file-input",type:"file",accept:"image/*",name:"resume",onChange:h}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement(z.d,null)),s.a.createElement("span",{className:"file-label"},"Choose Image")),s.a.createElement("span",{className:"file-name"},u.file?u.file.name:s.a.createElement("i",null,"no file selected")))))),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!1}))},disabled:u.loading,type:"reset",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Cancel")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:u.loading,type:"submit",className:"button mt-4 is-success is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.a,null),"\xa0 Save Changes")))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb-6 block"},s.a.createElement("p",{className:"is-capitalized has-text-weight-bold"},u.name),s.a.createElement("p",{className:"mt-4"},u.description)),s.a.createElement(je,{item:u.university}),s.a.createElement("div",{className:"field is-grouped is-grouped-centered"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:a,disabled:u.loading,type:"button",className:"button mt-4 is-dark is-outlined is-rounded is-uppercase"},s.a.createElement(z.b,null),"\xa0 Back")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:g,disabled:u.loading,type:"button",className:"button mt-4 is-danger is-rounded is-uppercase ".concat(u.loading?"is-loading":"")},s.a.createElement(z.v,null),"\xa0 Delete")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(){return p(Object(l.a)(Object(l.a)({},u),{},{showEdit:!0}))},disabled:u.loading,type:"button",className:"button mt-4 is-success is-rounded is-uppercase"},s.a.createElement(z.n,null),"\xa0 Edit")))))):s.a.createElement(Z,{message:"No university selected!",icon:s.a.createElement(z.w,null)})}function je(e){var t=e.item,a=Object(r.useContext)(q),n=Object(r.useState)({requests:[],players:[],loading:!1,show:"players"}),c=Object(o.a)(n,2),i=c[0],u=c[1],p=Object(W.useToasts)().addToast,b=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Object(l.a)(Object(l.a)({},i),{},{loading:!0})),e.next=4,Q.handleRequest(a,t.id,{player:n,approved:!0});case 4:e.sent,p("Successfully approved player request!",{appearance:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p(e.t0.message||"Failed to approve player request!",{appearance:"error"});case 11:return e.prev=11,u(Object(l.a)(Object(l.a)({},i),{},{loading:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[i]),v=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Rejecting request will prevent player from sending requests in future")){e.next=4;break}return e.abrupt("return");case 4:return u(Object(l.a)(Object(l.a)({},i),{},{loading:!0})),e.next=7,Q.handleRequest(a,t.id,{player:n,approved:!1});case 7:e.sent,p("Successfully rejected player request!",{appearance:"success"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(e.t0.message||"Failed to reject player request!",{appearance:"error"});case 14:return e.prev=14,u(Object(l.a)(Object(l.a)({},i),{},{loading:!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[i]),f=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Object(l.a)(Object(l.a)({},i),{},{loading:!0})),e.next=4,Q.deleteRequest(a,t.id,n);case 4:p("Successfully deleted player request!",{appearance:"success"}),u(Object(l.a)(Object(l.a)({},i),{},{loading:!1,requests:i.requests.filter((function(e){return e.id!==n}))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),p(e.t0.message||"Failed to delete player request!",{appearance:"error"}),u(Object(l.a)(Object(l.a)({},i),{},{loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[i]),h=Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u(Object(l.a)(Object(l.a)({},i),{},{loading:!0})),window.confirm("Are you sure you want to remove this player from selected university?")){e.next=6;break}return u(Object(l.a)(Object(l.a)({},i),{},{loading:!1})),e.abrupt("return");case 6:return e.next=8,Q.deletePlayer(a,t.id,n);case 8:p("Successfully removed player!",{appearance:"success"}),u(Object(l.a)(Object(l.a)({},i),{},{loading:!1,players:i.players.filter((function(e){return e.id!==n}))})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),u(Object(l.a)(Object(l.a)({},i),{},{loading:!1})),p(e.t0.message||"Failed to remove player!",{appearance:"error"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[i]),E=Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getRequests(a,t.id);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),p(e.t0.message||"Failed to fetch requests!",{appearance:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]),g=Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getPlayers(a,t.id);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),p(e.t0.message||"Failed to fetch players!",{appearance:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);return Object(r.useEffect)((function(){new Promise(function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),e.next=3,g();case 3:return a=e.sent,e.next=6,E();case 6:n=e.sent,u((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1,requests:n,players:a})})),t();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),u((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1})}))}))}),[]),s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"tabs is-centered is-toggle is-uppercase"},s.a.createElement("ul",null,s.a.createElement("li",{onClick:function(){return u(Object(l.a)(Object(l.a)({},i),{},{show:"players"}))},className:"players"===i.show?"is-active":""},s.a.createElement("a",null,s.a.createElement("span",null,"Players"))),s.a.createElement("li",{onClick:function(){return u(Object(l.a)(Object(l.a)({},i),{},{show:"requests"}))},className:"requests"===i.show?"is-active":""},s.a.createElement("a",null,s.a.createElement("span",null,"Requests"))))),s.a.createElement("div",null,"players"===i.show?i.players.length<1?s.a.createElement(Z,{message:"No player added yet!",shadow:!1}):i.players.map((function(e){return s.a.createElement("div",{className:"level px-2 py-2 my-3 is-hoverable-row"},s.a.createElement("div",{className:"level-left"},s.a.createElement("div",{className:"level-item"},s.a.createElement("figure",{className:"image is-48x48",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:e.profileImageURL}))),s.a.createElement("div",{className:"level-item has-text-weight-bold is-capitalized"},e.firstName," ",e.lastName)),s.a.createElement("div",{className:"level-right"},s.a.createElement("div",{className:"level-item"},s.a.createElement("button",{onClick:function(){return h(e.id)},disabled:i.loading,type:"button",className:"button is-danger is-outlined is-rounded is-uppercase"},s.a.createElement(Ee.a,null),"\xa0 Remove"))))})):i.requests.length<1?s.a.createElement(Z,{message:"No request available!",shadow:!1}):i.requests.map((function(e){return s.a.createElement("div",{className:"level px-2 py-2 my-3 is-hoverable-row"},s.a.createElement("div",{className:"level-left"},s.a.createElement("div",{className:"level-item"},s.a.createElement("figure",{className:"image is-48x48",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:e.profileImageURL}))),s.a.createElement("div",{className:"level-item has-text-weight-bold is-capitalized"},e.firstName," ",e.lastName," \xa0","rejected"===e.status?s.a.createElement("span",{className:"tag is-danger is-uppercase"},e.status):null)),s.a.createElement("div",{className:"level-right"},"pending"===e.status?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"level-item"},s.a.createElement("button",{onClick:function(){return b(e.id)},disabled:i.loading,type:"button",className:"button is-success is-outlined is-rounded is-uppercase"},s.a.createElement(z.a,null),"\xa0 accept")),s.a.createElement("div",{className:"level-item",title:"Reject request and prevent player from sending request in future"},s.a.createElement("button",{onClick:function(){return v(e.id)},disabled:i.loading,type:"button",className:"button is-danger is-rounded is-uppercase"},s.a.createElement(Ee.a,null),"\xa0 reject"))):null,s.a.createElement("div",{className:"level-item"},s.a.createElement("button",{onClick:function(){return f(e.id)},disabled:i.loading,type:"button",className:"button is-danger is-outlined is-rounded is-uppercase"},s.a.createElement("span",{className:"icon"},s.a.createElement(z.v,null))))))}))))}Intl.NumberFormat();function Oe(e){var t=e.uni,a=e.onClick;return s.a.createElement("div",{onClick:a,className:"column is-3-widescreen is-4-desktop is-12-mobile is-6-tablet"},s.a.createElement("div",{className:"card is-hoverable-card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("figure",{className:"image mb-4 is-96x96",style:{margin:"auto"}},s.a.createElement("img",{className:"is-rounded",style:{height:"100%"},src:t.profileImageURL})),s.a.createElement("div",{className:"block"},s.a.createElement("p",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"is-clipped is-size-6 has-text-weight-bold is-capitalized"},t.name)))))}function we(){var e=Object(r.useContext)(q),t=Object(r.useState)({loadingMore:!1,items:new Array,selected:void 0}),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(W.useToasts)().addToast,u=Object(r.useCallback)(Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),t.next=4,Q.getAllUniversities(e,Math.max(2,Math.ceil(n.items.length/20)+1));case 4:if(!((a=t.sent).length<1)){t.next=8;break}return i("No new data to fetch!",{appearance:"info"}),t.abrupt("return",c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1})));case 8:c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,items:[].concat(Object(re.a)(n.items),Object(re.a)(a))})),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"});case 16:case"end":return t.stop()}}),t,null,[[0,11]])}))),[n]);return Object(r.useEffect)((function(){c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),Q.getAllUniversities(e).then((function(e){if(e.length<1)return i("No new data to fetch!",{appearance:"info"}),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1}));c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!1,items:e}))})).catch((function(e){console.log(e),c(Object(l.a)(Object(l.a)({},n),{},{loadingMore:!0})),i("Failed to load new data!",{appearance:"error"})}))}),[]),s.a.createElement(xe,null,s.a.createElement("div",{className:"container is-fluid mb-6"},s.a.createElement("div",{className:"section my-4"},s.a.createElement("div",{className:"columns is-multiline is-vcentered is-flex-centered"},n.items.map((function(e){return s.a.createElement(Oe,{key:e.id,onClick:function(){c((function(t){return Object(l.a)(Object(l.a)({},t),{},{selected:e})}))},uni:e})})))),s.a.createElement("div",{onClick:u,className:"button is-size-7 px-5 is-uppercase is-rounded is-dark ".concat(n.loadingMore?"is-loading":"")},"Load More")),n.selected?s.a.createElement(_,{active:!0,onDismiss:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selected:void 0}))}},s.a.createElement(ge,{onCancel:function(){return c(Object(l.a)(Object(l.a)({},n),{},{selected:void 0}))},uni:n.selected})):null)}var Ne=function(){return s.a.createElement("div",{className:"is-flex-centered",style:{height:"100%",filter:"grayscale(1)"}},s.a.createElement("figure",{className:"image is-128x128"},s.a.createElement("img",{src:B.a})))},xe=function(e){var t=e.loading,a=e.children;return s.a.createElement("div",{className:"App-Body"},t?s.a.createElement(Ne,null):s.a.createElement(s.a.Fragment,null,a))},ye=function(e){var t=e.showLoading,a=(Object(r.useContext)(q),Object(r.useContext)(A));return t?s.a.createElement(xe,{loading:!0}):s.a.createElement(F.d,null,s.a.createElement(F.b,{path:x,exact:!0},s.a.createElement(H,null)),s.a.createElement(F.b,{path:y,exact:!0},s.a.createElement($,null)),s.a.createElement(F.b,{path:g,exact:!0},s.a.createElement(J,null)),s.a.createElement(G,{path:N},s.a.createElement(ne,null)),s.a.createElement(G,{path:j,exact:!0},s.a.createElement(oe,null)),s.a.createElement(G,{path:w,exact:!0},s.a.createElement(we,null)),s.a.createElement(G,{path:O,exact:!0},s.a.createElement(ve,null)),s.a.createElement(G,{path:C},s.a.createElement(he,null)),s.a.createElement(F.b,{path:k,exact:!0},a.signedIn?s.a.createElement(F.a,{to:N}):s.a.createElement(F.a,{to:x})),s.a.createElement(G,null,s.a.createElement(xe,{loading:t},s.a.createElement("div",{className:"container is-fluid is-fullheight is-flex-centered"},s.a.createElement(Z,{message:"Page not found",shadow:!1})))))};var ke=function(){var e=Object(r.useState)({ready:!1,loading:!1}),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(void 0),i=Object(o.a)(c,2),u=i[0],d=i[1],m={setSignedInUser:d,signedIn:u,setLoading:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{loading:e}))}};return Object(r.useEffect)((function(){M.ready.then((function(){M.signedIn()?d(M.user):d(void 0),n(Object(l.a)(Object(l.a)({},a),{},{ready:!0}))})).finally((function(){M.logoutListener=function(){return m.setSignedInUser(void 0)}}))}),[]),s.a.createElement(W.ToastProvider,{autoDismiss:!0,autoDismissTimeout:4e3,placement:"top-center"},s.a.createElement(q.Provider,{value:M},s.a.createElement(A.Provider,{value:m},s.a.createElement(L,{hidden:!a.ready}),s.a.createElement(ye,{showLoading:!a.ready||a.loading}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(I.a,{basename:"/karry-adminui"},s.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.8c111163.chunk.js.map